<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="buy">
	<select id="selectPcart" resultType="com.hb.model.CartVo" parameterType="String">
  		select cart_idx, `name` p_name, id, TB_PRODUCT.serial_num, ea, price eaPrice, cart_date from TB_CART, TB_PRODUCT where TB_CART.serial_num = TB_PRODUCT.serial_num and id=#{id}
  	</select>
	<select id="selOneUser" resultType="com.hb.model.UserVo" parameterType="String">
		SELECT id, `name`, post, main_addr, sub_addr, sex, phone, mobile, email, `point`, pm FROM TB_USER, TB_PM where TB_USER.pm_num=TB_PM.pm_num and TB_USER.id=#{id};
	</select>
	<select id="selectPcartOne" resultType="com.hb.model.CartVo" parameterType="int">
		select cart_idx, `name` p_name, id, TB_PRODUCT.serial_num, ea, price eaPrice, cart_date from TB_CART, TB_PRODUCT where TB_CART.serial_num = TB_PRODUCT.serial_num and cart_idx=#{value}
	</select>
	<insert id="insertBuyOne" parameterType="com.hb.model.BuyVo">
		insert into TB_BUY(id, serial_num, ea, state_num, rec_name, phone, post, main_addr, sub_addr, se_phone, comment, add_comment, pay_option, buynum) values(#{id}, #{serial_num}, #{ea}, #{state_num}, #{rec_name}, #{phone}, #{post}, #{main_addr}, #{sub_addr}, #{se_phone}, #{comment}, #{add_comment}, #{pay_option}, #{buynum})
	</insert>
	<select id="selMaxbuynum" resultType="int">
		select max(buynum) from TB_BUY
	</select>
</mapper>






